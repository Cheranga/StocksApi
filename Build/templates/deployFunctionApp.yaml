steps:
  - task: AzureAppServiceManage@0
    displayName: 'Start Staging Slot'
    inputs:
      azureSubscription: '$(azureSubscription)'    
      Action: 'Start Azure App Service'
      WebAppName: '$(functionAppName)'
      SpecifySlotOrASE: true
      ResourceGroupName: $(resourceGroupName)
      Slot: Staging

  - task: AzureFunctionApp@1
    displayName: "Deploy Azure Function App"
    inputs:
      azureSubscription: "$(azureSubscription)"
      appType: functionApp
      appName: "$(functionAppName)/slots/Staging"
      package: "$(Pipeline.Workspace)/drop/$(Build.BuildId).zip"
      deployToSlotOrASE: true
      resourceGroupName: "cchatdemoorg"
      slotName: "Staging"
